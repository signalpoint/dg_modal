function dg_modal_blocks_build_alter(t){t.modal._attributes.class.push("modal")}dg.createModule("dg_modal"),dg._modal=null,DgModal=function(){this._block=dg.getBlockFromDom("modal"),this._content=null,this._alertCallback=null},DgModal.prototype.getBlock=function(){return this._block},DgModal.prototype.setAlertCallback=function(t){this._alertCallback=t},DgModal.prototype.getAlertCallback=function(){return this._alertCallback},DgModal.prototype.isOpen=function(){return"block"==this.getBlock().style.display},DgModal.prototype.open=function(){this.getBlock().style.display="block"},DgModal.prototype.close=function(){this.getBlock().style.display="none",this.getAlertCallback()()},DgModal.prototype.setContent=function(t){t._theme="modal_wrapper",this.getBlock().innerHTML=dg.render(t)},DgModal.prototype.clearContent=function(){this.getBlock().innerHTML=""},DgModal.prototype.onkeydown=function(t){t=t||window.event;var o=!1;if(o="key"in t?"Escape"==t.key||"Esc"==t.key:27==t.keyCode){var e=dg_modal.load();e.isOpen()&&e.close()}},DgModal.prototype.onclick=function(t){var o=dg_modal.load(),e=o.getBlock();t.target==e&&o.isOpen()&&o.close()},dg_modal.blocks=function(){var t={};return t.modal={build:function(){return new Promise(function(t,o){var e={};e.modal={_markup:""},t(e)})}},t},dg_modal.load=function(){var t=!!dg._modal;if(t)return dg._modal;var o=new DgModal;return dg._modal=o,window.addEventListener("keydown",o.onkeydown,!1),window.addEventListener("click",o.onclick,!1),o},dg_modal.close=function(){dg_modal.load().close()},dg_modal.alert=function(t,o){o||(o={});var e=o.type?o.type:"status",l={status:"Status",warning:"Warning",error:"Error"},a=dg.t(l[e]?l[e]:"Alert"),d=o.alertCallback?o.alertCallback:null;o.title&&(a=o.title);var n=o.buttonName?o.buttonName:dg.t("OK"),r=dg_modal.load();r.setAlertCallback(d),r.setContent({_attributes:{class:[e]},_header:a,_content:t,_footer:n}),r.open()},dg.modal=dg_modal.alert,dg.alert||(dg.alert=dg_modal.alert),dg_modal.confirm=function(t,o){},dg.modalConfirm=dg_modal.confirm,dg.confirm||(dg.confirm=dg_modal.confirm),dg.theme_modal_content=function(t){return t._attributes.class.push("modal-content"),"<div "+dg.attrs(t)+">"+dg.render(t._content)+"</div>"},dg.theme_modal_footer=function(t){return t._attributes.class.push("modal-footer"),"<div "+dg.attrs(t)+">"+dg.b(t._title,{_attributes:{onclick:"dg_modal.close()"}})+"</div>"},dg.theme_modal_header=function(t){return t._attributes.class.push("modal-header"),"<div "+dg.attrs(t)+'><span class="modal-close" onclick="dg_modal.close()">&times;</span><h2>'+t._title+"</h2></div>"},dg.theme_modal_wrapper=function(t){t._attributes.class.push("modal-wrapper");var o="<div "+dg.attrs(t)+">";return t._header&&(o+=dg.render({_theme:"modal_header",_title:t._header})),t._content&&(o+=dg.render({_theme:"modal_content",_content:t._content})),t._footer&&(o+=dg.render({_theme:"modal_footer",_title:t._footer})),o+"</div>"};